module Rogue

class AspectMethodPatcher : InspectionVisitor [singleton]
  PROPERTIES
    this_type : Type

  METHODS
    method patch( this_type, m:Method )
      m.module_context = this_type.module_context
      m.type_context   = this_type
      if (m.attributes.returns_this) m.return_type = this_type
      visit( m )

    method on_visit( cmd:This )
      cmd.this_type = this_type
endClass
